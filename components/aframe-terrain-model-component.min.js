!function(e){function r(n){if(t[n])return t[n].exports;var i=t[n]={exports:{},id:n,loaded:!1};return e[n].call(i.exports,i,i.exports,r),i.loaded=!0,i.exports}var t={};return r.m=e,r.c=t,r.p="",r(0)}([function(e,r,t){if("undefined"==typeof AFRAME)throw new Error("Component attempted to register before AFRAME was available.");t(1),AFRAME.registerComponent("terrain-model",{schema:{DEM:{type:"src"},texture:{type:"src"},planeHeight:{type:"number"},planeWidth:{type:"number"},segmentsHeight:{type:"number","default":199},segmentsWidth:{type:"number","default":199},zPosition:{type:"number","default":1.5},debug:{"default":!1}},multiple:!1,update:function(e){var r,t=this.el,n=this.data,i=n.debug,a=n.DEM,o=n.texture,s=new THREE.TerrainLoader,d=new THREE.PlaneGeometry(n.planeWidth,n.planeHeight,n.segmentsWidth,n.segmentsHeight),u=n.zPosition;s.load(a,function(e){for(var n=0,a=d.vertices.length;n<a;n++)d.vertices[n].z=e[n]/65535*u;var s=new THREE.TextureLoader,p=s.load(o);p.anisotropy=16;var m=new THREE.MeshLambertMaterial({map:p});r=new THREE.Mesh(d,m),r.rotation.x=-90*Math.PI/180,t.setObject3D("terrain",r),i&&(wireframe=new THREE.WireframeHelper(r,5025616),t.setObject3D("terrain-wireframe",wireframe))})},remove:function(){this.el.removeObject3D("terrain-wireframe"),this.el.removeObject3D("terrain")}})},function(e,r){THREE.TerrainLoader=function(e){this.manager=void 0!==e?e:THREE.DefaultLoadingManager},THREE.TerrainLoader.prototype={constructor:THREE.TerrainLoader,load:function(e,r,t,n){var i=this,a=new XMLHttpRequest;void 0!==r&&a.addEventListener("load",function(t){r(new Uint16Array(t.target.response)),i.manager.itemEnd(e)},!1),void 0!==t&&a.addEventListener("progress",function(e){t(e)},!1),void 0!==n&&a.addEventListener("error",function(e){n(e)},!1),void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),a.open("GET",e,!0),a.responseType="arraybuffer",a.send(null),i.manager.itemStart(e)},setCrossOrigin:function(e){this.crossOrigin=e}}}]);